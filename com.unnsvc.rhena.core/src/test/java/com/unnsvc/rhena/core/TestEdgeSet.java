
package com.unnsvc.rhena.core;

import org.junit.Assert;
import org.junit.Test;

import com.unnsvc.rhena.common.execution.EExecutionType;
import com.unnsvc.rhena.common.model.ESelectionType;

public class TestEdgeSet {

	@Test
	public void testUnique() throws Exception {

		ExecutionMergeEdgeSet set = new ExecutionMergeEdgeSet();
		set.addEdge(TestUtil.createEdge(EExecutionType.DELIVERABLE));
		set.addEdge(TestUtil.createEdge(EExecutionType.INTEGRATION));

		Assert.assertFalse(set.isEmpty());
		Assert.assertEquals(1, set.size());
		Assert.assertTrue(set.contains(TestUtil.createEdge(EExecutionType.INTEGRATION)));
	}

	@Test
	public void testUniqueReverse() throws Exception {

		ExecutionMergeEdgeSet set = new ExecutionMergeEdgeSet();
		Assert.assertTrue(set.addEdge(TestUtil.createEdge(EExecutionType.INTEGRATION)));
		Assert.assertFalse(set.addEdge(TestUtil.createEdge(EExecutionType.DELIVERABLE)));

		Assert.assertFalse(set.isEmpty());
		Assert.assertEquals(1, set.size());
		Assert.assertTrue(set.contains(TestUtil.createEdge(EExecutionType.INTEGRATION)));
	}
	
	@Test
	public void testTwo() throws Exception {
		
		ExecutionMergeEdgeSet set = new ExecutionMergeEdgeSet();
		set.addEdge(TestUtil.createEdge(EExecutionType.FRAMEWORK));
		set.addEdge(TestUtil.createEdge(EExecutionType.DELIVERABLE));
		
		Assert.assertFalse(set.isEmpty());
		Assert.assertEquals(2,  set.size());
		Assert.assertTrue(set.contains(TestUtil.createEdge(EExecutionType.FRAMEWORK)));
		Assert.assertTrue(set.contains(TestUtil.createEdge(EExecutionType.DELIVERABLE)));
	}

	@Test
	public void testDifferentTraverse() throws Exception {
		
		ExecutionMergeEdgeSet set = new ExecutionMergeEdgeSet();
		set.addEdge(TestUtil.createEdge(EExecutionType.DELIVERABLE, ESelectionType.COMPONENT));
		set.addEdge(TestUtil.createEdge(EExecutionType.DELIVERABLE, ESelectionType.DIRECT));
		Assert.assertEquals(2, set.size());
	}

}
